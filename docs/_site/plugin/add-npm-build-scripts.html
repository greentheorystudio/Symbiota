<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=" media="screen" type="text/css">
    <link rel="stylesheet" href="/assets/css/print.css" media="print" type="text/css">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Symbiota2</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Symbiota2" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://0.0.0.0:4000/plugin/add-npm-build-scripts.html" />
<meta property="og:url" content="http://0.0.0.0:4000/plugin/add-npm-build-scripts.html" />
<meta property="og:site_name" content="Symbiota2" />
<script type="application/ld+json">
{"headline":"Symbiota2","@type":"WebPage","url":"http://0.0.0.0:4000/plugin/add-npm-build-scripts.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <header>
      <div class="inner">
        <a href="http://0.0.0.0:4000/">
          <h1>Symbiota2</h1>
        </a>
        <h2></h2>
        <a href="https://github.com/Symbiota2/Symbiota2" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3 id="back-to-index"><a href="./index.html">Back to index</a></h3>

<h1 id="add-npm-scripts-to-the-packagejson-file">Add npm scripts to the package.json file</h1>

<p><strong>Before proceeding, be sure to have <a href="./frontend-initial-setup.html">setup your plugin to add frontend elements</a>.</strong></p>

<p>To add npm build scripts for your plugin to the package.json file, follow these steps:</p>
<ul>
  <li><strong>If you are using a Mac or Linux machine:</strong>
    <ul>
      <li>Edit the <code class="highlighter-rouge">package.json</code> file in the root folder of your Symbiota2 installation by adding the following lines after the last line 
in the <code class="highlighter-rouge">scripts</code> property (replacing <code class="highlighter-rouge">&lt;plugin-name&gt;</code> with the name of your plugin):
        <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"build_&lt;plugin-name&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ng build &lt;plugin-name&gt;"</span><span class="err">,</span><span class="w">
</span><span class="nl">"npm_pack_&lt;plugin-name&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cd dist/&lt;plugin-name&gt; &amp;&amp; npm pack"</span><span class="err">,</span><span class="w">
</span><span class="nl">"move_&lt;plugin-name&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cp ./dist/&lt;plugin-name&gt;/bundles/&lt;plugin-name&gt;.umd.js ./src/ui/assets/js/plugins/"</span><span class="w">
</span></code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>If you are using a Windows machine:</strong>
    <ul>
      <li>Edit the <code class="highlighter-rouge">package.json</code> file in the root folder of your Symbiota2 installation by adding the following lines after the last line 
in the <code class="highlighter-rouge">scripts</code> property (replacing <code class="highlighter-rouge">&lt;plugin-name&gt;</code> with the name of your plugin):
        <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"build_&lt;plugin-name&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ng build &lt;plugin-name&gt;"</span><span class="err">,</span><span class="w">
</span><span class="nl">"npm_pack_&lt;plugin-name&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cd dist/&lt;plugin-name&gt; &amp;&amp; npm pack"</span><span class="err">,</span><span class="w">
</span><span class="nl">"move_&lt;plugin-name&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"copy .</span><span class="se">\\</span><span class="s2">dist</span><span class="se">\\</span><span class="s2">&lt;plugin-name&gt;</span><span class="se">\\</span><span class="s2">bundles</span><span class="se">\\</span><span class="s2">&lt;plugin-name&gt;.umd.js .</span><span class="se">\\</span><span class="s2">src</span><span class="se">\\</span><span class="s2">ui</span><span class="se">\\</span><span class="s2">assets</span><span class="se">\\</span><span class="s2">js</span><span class="se">\\</span><span class="s2">plugins</span><span class="se">\\</span><span class="s2">"</span><span class="w">
</span></code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>If you are going to be offering i18n internationalization support:</strong>
    <ul>
      <li>Determine the <a href="https://www.loc.gov/standards/iso639-2/php/code_list.php" target="_blank">ISO 639-1 codes for all of the languages you will support (must support English)</a></li>
      <li>For each language, add the following line (using the appropriate operating system format) after the lines added in the 
previous steps (replacing <code class="highlighter-rouge">&lt;plugin-name&gt;</code> with the name of your plugin and replacing <code class="highlighter-rouge">&lt;iso-639-1-code&gt;</code> with the ISO 639-1 
code for the language):
        <ul>
          <li><strong>If you are using a Mac or Linux machine:</strong>
            <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"merge-&lt;plugin-name&gt;-&lt;iso-639-1-code&gt;-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json-merger --output src/ui/assets/i18n/&lt;iso-639-1-code&gt;.json --pretty plugins/&lt;plugin-name&gt;/i18n/&lt;iso-639-1-code&gt;.json src/ui/assets/i18n/&lt;iso-639-1-code&gt;.json"</span><span class="w">
</span></code></pre></div>            </div>
          </li>
          <li><strong>If you are using a Windows machine:</strong>
            <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"merge-&lt;plugin-name&gt;-&lt;iso-639-1-code&gt;-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json-merger --output src</span><span class="se">\\</span><span class="s2">ui</span><span class="se">\\</span><span class="s2">assets</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">&lt;iso-639-1-code&gt;.json --pretty plugins</span><span class="se">\\</span><span class="s2">&lt;plugin-name&gt;</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">&lt;iso-639-1-code&gt;.json src</span><span class="se">\\</span><span class="s2">ui</span><span class="se">\\</span><span class="s2">assets</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">&lt;iso-639-1-code&gt;.json"</span><span class="w">
</span></code></pre></div>            </div>
          </li>
        </ul>
      </li>
      <li>Add the following line to automate the execution of all of the merge scripts added in the previous step replacing <code class="highlighter-rouge">&lt;plugin-name&gt;</code> with 
the name of your plugin and replacing <code class="highlighter-rouge">&lt;merge-script-calls&gt;</code> with calls to each of the merge scripts created in the 
previous step in the format <code class="highlighter-rouge">npm run &lt;script&gt;</code> (with <code class="highlighter-rouge">&lt;script&gt;</code> being the script) separated by a double ampersand surrounded 
by spaces:
        <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"merge-&lt;plugin-name&gt;-all-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;merge-script-calls&gt;"</span><span class="w">
</span></code></pre></div>        </div>
      </li>
      <li>Add the following line (using the appropriate operating system format) after the line added in the previous step:
        <ul>
          <li><strong>If you are using a Mac or Linux machine, use the following format replacing <code class="highlighter-rouge">&lt;plugin-name&gt;</code> with the name of your 
plugin and replacing <code class="highlighter-rouge">&lt;language-iso-639-1-codes&gt;</code> with the ISO 639-1 codes of each of the languages you will support 
separated by a comma:</strong>
            <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"extract-&lt;plugin-name&gt;-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ngx-translate-extract --input ./plugins/&lt;plugin-name&gt; --output ./plugins/&lt;plugin-name&gt;/i18n/{&lt;language-iso-639-1-codes&gt;}.json --sort"</span><span class="w">
</span></code></pre></div>            </div>
          </li>
          <li><strong>If you are using a Windows machine, use the following format replacing <code class="highlighter-rouge">&lt;plugin-name&gt;</code> with the name of your 
plugin and replacing <code class="highlighter-rouge">&lt;language-file-references&gt;</code> with references to the translation files for each of the languages
for which you will offering support in the format <code class="highlighter-rouge">.\\plugins\\&lt;plugin-name&gt;\\i18n\\&lt;iso-639-1-code&gt;.json</code> (with <code class="highlighter-rouge">&lt;plugin-name&gt;</code> being 
the name of your plugin and <code class="highlighter-rouge">&lt;iso-639-1-code&gt;</code> being the ISO 639-1 code for the language) separated by a space:</strong>
            <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"extract-&lt;plugin-name&gt;-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ngx-translate-extract --input .</span><span class="se">\\</span><span class="s2">plugins</span><span class="se">\\</span><span class="s2">&lt;plugin-name&gt; --output &lt;language-file-references&gt; --sort"</span><span class="w">
</span></code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Add a final package script to automate the execution the other scripts added after the line added in the previous step:
    <ul>
      <li><strong>If you are going to be offering i18n internationalization support:</strong>
        <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"package_&lt;plugin-name&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run build_&lt;plugin-name&gt; &amp;&amp; npm run npm_pack_&lt;plugin-name&gt; &amp;&amp; npm run move_&lt;plugin-name&gt; &amp;&amp; npm run merge-&lt;plugin-name&gt;-all-translations"</span><span class="w">
</span></code></pre></div>        </div>
      </li>
      <li><strong>If you are not going to be offering i18n internationalization support:</strong>
        <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"package_&lt;plugin-name&gt;"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run build_&lt;plugin-name&gt; &amp;&amp; npm run npm_pack_&lt;plugin-name&gt; &amp;&amp; npm run move_&lt;plugin-name&gt;"</span><span class="w">
</span></code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>After following the above steps, for a plugin offering i18n internationalization support for English, Spanish, and Portuguese, 
the <code class="highlighter-rouge">package.json</code> file in the root folder of your Symbiota2 installation should resemble the following on a Mac or Linux machine 
(with <code class="highlighter-rouge">...</code> representing omitted lines):
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"symbiota2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">
      </span><span class="nl">"postinstall"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run package_core_plugins &amp;&amp; npm run package_optional_plugins"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"build_example-plugin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ng build example-plugin"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"npm_pack_example-plugin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cd dist/example-plugin &amp;&amp; npm pack"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"move_example-plugin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cp ./dist/example-plugin/bundles/example-plugin.umd.js ./src/ui/assets/js/plugins/"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merge-example-plugin-en-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json-merger --output src/ui/assets/i18n/en.json --pretty plugins/example-plugin/i18n/en.json src/ui/assets/i18n/en.json"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merge-example-plugin-es-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json-merger --output src/ui/assets/i18n/es.json --pretty plugins/example-plugin/i18n/es.json src/ui/assets/i18n/es.json"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merge-example-plugin-pt-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json-merger --output src/ui/assets/i18n/pt.json --pretty plugins/example-plugin/i18n/pt.json src/ui/assets/i18n/pt.json"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merge-example-plugin-all-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run merge-example-plugin-en-translations &amp;&amp; npm run merge-example-plugin-es-translations &amp;&amp; npm run merge-example-plugin-pt-translations"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extract-example-plugin-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ngx-translate-extract --input ./plugins/example-plugin --output ./plugins/example-plugin/i18n/{en,es,pt}.json --sort"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"package_example-plugin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run build_example-plugin &amp;&amp; npm run npm_pack_example-plugin &amp;&amp; npm run move_example-plugin &amp;&amp; npm run merge-example-plugin-all-translations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>After following the above steps, for a plugin offering i18n internationalization support for English, Spanish, and Portuguese, 
the <code class="highlighter-rouge">package.json</code> file in the root folder of your Symbiota2 installation should resemble the following on a Windows machine 
(with <code class="highlighter-rouge">...</code> representing omitted lines):
    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"symbiota2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">
      </span><span class="nl">"postinstall"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run package_core_plugins &amp;&amp; npm run package_optional_plugins"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"build_example-plugin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ng build example-plugin"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"npm_pack_example-plugin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cd dist/example-plugin &amp;&amp; npm pack"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"move_example-plugin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"copy .</span><span class="se">\\</span><span class="s2">dist</span><span class="se">\\</span><span class="s2">example-plugin</span><span class="se">\\</span><span class="s2">bundles</span><span class="se">\\</span><span class="s2">example-plugin.umd.js .</span><span class="se">\\</span><span class="s2">src</span><span class="se">\\</span><span class="s2">ui</span><span class="se">\\</span><span class="s2">assets</span><span class="se">\\</span><span class="s2">js</span><span class="se">\\</span><span class="s2">plugins</span><span class="se">\\</span><span class="s2">"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merge-example-plugin-en-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json-merger --output src</span><span class="se">\\</span><span class="s2">ui</span><span class="se">\\</span><span class="s2">assets</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">en.json --pretty plugins</span><span class="se">\\</span><span class="s2">example-plugin</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">en.json src</span><span class="se">\\</span><span class="s2">ui</span><span class="se">\\</span><span class="s2">assets</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">en.json"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merge-example-plugin-es-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json-merger --output src</span><span class="se">\\</span><span class="s2">ui</span><span class="se">\\</span><span class="s2">assets</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">es.json --pretty plugins</span><span class="se">\\</span><span class="s2">example-plugin</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">es.json src</span><span class="se">\\</span><span class="s2">ui</span><span class="se">\\</span><span class="s2">assets</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">es.json"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merge-example-plugin-pt-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json-merger --output src</span><span class="se">\\</span><span class="s2">ui</span><span class="se">\\</span><span class="s2">assets</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">pt.json --pretty plugins</span><span class="se">\\</span><span class="s2">example-plugin</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">pt.json src</span><span class="se">\\</span><span class="s2">ui</span><span class="se">\\</span><span class="s2">assets</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">pt.json"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merge-example-plugin-all-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run merge-example-plugin-en-translations &amp;&amp; npm run merge-example-plugin-es-translations &amp;&amp; npm run merge-example-plugin-pt-translations"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extract-example-plugin-translations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ngx-translate-extract --input .</span><span class="se">\\</span><span class="s2">plugins</span><span class="se">\\</span><span class="s2">example-plugin --output .</span><span class="se">\\</span><span class="s2">plugins</span><span class="se">\\</span><span class="s2">example-plugin</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">en.json .</span><span class="se">\\</span><span class="s2">plugins</span><span class="se">\\</span><span class="s2">example-plugin</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">es.json .</span><span class="se">\\</span><span class="s2">plugins</span><span class="se">\\</span><span class="s2">example-plugin</span><span class="se">\\</span><span class="s2">i18n</span><span class="se">\\</span><span class="s2">pt.json --sort"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"package_example-plugin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run build_example-plugin &amp;&amp; npm run npm_pack_example-plugin &amp;&amp; npm run move_example-plugin &amp;&amp; npm run merge-example-plugin-all-translations"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"private"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>After adding these scripts to the <code class="highlighter-rouge">package.json</code> file, you can build your plugin and install (or update) it in your main
Symbiota2 application by running the following command (replacing <code class="highlighter-rouge">&lt;plugin-name&gt;</code> with the name of your plugin):
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run package_&lt;plugin-name&gt;
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="back-to-index-1"><a href="./index.html">Back to index</a></h3>

        </section>

        <aside id="sidebar">
          
            <a href="https://github.com/Symbiota2/Symbiota2/archive/master.zip" class="button">
              <small>Download</small>
              .zip file
            </a>
            <a href="https://github.com/Symbiota2/Symbiota2/archive/master.tar.gz" class="button">
              <small>Download</small>
              .tar.gz file
            </a>
          

        </aside>
      </div>
    </div>

    
  </body>
</html>
